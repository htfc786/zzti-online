import{c as j}from"./index-55ace678.js";import{_ as D}from"./index-15b4e44c.js";function L(i){const o=i.split(`
`).filter(t=>t.trim()!=="").map(t=>t.replace(/^[*▫]/,"").trim());for(let t=0;t<o.length-1;t++)if(!/^[a-zA-Z]/.test(o[t+1])){const u=/[a-zA-Z]$/.test(o[t][o[t].length-1]);o[t]+=(u?" ":"")+o[t+1],o.splice(t+1,1)}return o.map((t,u)=>{const n=t.split(" ");return n.pop(),t.includes("/")?{index:u+1,word:n[0],pronounce:n[1],chinese:n.slice(2).join(" ")}:{index:u+1,word:n.slice(0,-1).join(" "),pronounce:"",chinese:n[n.length-1]}})}const m=i=>(Vue.pushScopeId("data-v-c179a47f"),i=i(),Vue.popScopeId(),i),R={id:"wordTool"},O=m(()=>Vue.createElementVNode("p",null,"支持外研版高中英语电子版单词表解析",-1)),U=m(()=>Vue.createElementVNode("p",null,[Vue.createTextVNode("可前往"),Vue.createElementVNode("a",{href:"https://basic.smartedu.cn/tchMaterial?defaultTag=e7bbcefe-0590-11ed-9c79-92fc3b3249d5%2F6a7495dc-0772-11ed-ac74-092ab92074e6%2F44bedbe2-54e6-11ed-9c34-850ba61fa9f4",target:"_blank"},"智慧中小学网站"),Vue.createTextVNode("选择对应的书籍复制单词表")],-1)),$=m(()=>Vue.createElementVNode("p",{style:{"margin-top":"8px"}},"提示: 导出后请自行上传",-1)),F={key:0,class:"editable-row-operations"},z={key:0},A=m(()=>Vue.createElementVNode("a",null,"取消",-1)),J={key:1},M=["onClick"],W=m(()=>Vue.createElementVNode("a",{style:{color:"red"}},"删除",-1)),q={key:2},Q=Vue.defineComponent({__name:"word",setup(i){const o=Vue.ref(""),a=Vue.ref([]),t=()=>{if(!o.value){antd.message.error("请输入单词表");return}if(a.value=L(o.value),!a.value.length){antd.message.error("解析失败");return}antd.message.success("解析成功")},u=e=>{const d=[];return e.forEach(c=>{d.push({q:c.word,ans:c.chinese,con:c.pronounce})}),d},n=()=>{if(!a.value.length){antd.message.error("请解析单词表");return}const e=u(a.value),d=JSON.stringify(e),c=new Blob([d],{type:"application/json"}),f=URL.createObjectURL(c),s=document.createElement("a");s.href=f,s.download="wordList.json";const V=antd.Modal.success({title:"导出成功",content:"点击下载按钮下载json",footer:()=>Vue.h("div",{style:"display: flex; flex-direction: row-reverse;"},[Vue.h(antd.Button,{type:"primary",onClick:()=>{s.click(),URL.revokeObjectURL(f),V.destroy()}},{default:()=>"下载"}),Vue.h(antd.Button,{style:"margin-right: 8px;",onClick:()=>{V.destroy()}},{default:()=>"取消"})])})},g=()=>{if(!a.value.length){antd.message.error("请解析单词表");return}antd.Modal.confirm({title:"请输入题库名称",content:Vue.h("input",{id:"tempDataName",placeholder:"请输入题库名称",style:"width: 100%;"}),onOk(){const e=document.getElementById("tempDataName");if(!e.value){antd.message.error("请输入题库名称");return}j(e.value,u(a.value)),antd.message.success("添加成功")}})},y=[{title:"#",dataIndex:"index",width:"10%"},{title:"单词",dataIndex:"word"},{title:"中文",dataIndex:"chinese"},{title:"音标",dataIndex:"pronounce"},{title:"",dataIndex:"operation"}],h=Vue.ref(),l=Vue.reactive({}),C=e=>JSON.parse(JSON.stringify(e)),v=e=>{l[e]=C(a.value[e])},w=e=>{Object.assign(a.value[e],l[e]),delete l[e]},N=e=>{delete l[e]},k=e=>{a.value.splice(e,1),delete l[e]},b=()=>{a.value.push({word:"",chinese:"",pronounce:""}),v(a.value.length-1);const e=h.value.$el;requestAnimationFrame(()=>{e.scrollTo(0,e.scrollHeight)})};return(e,d)=>{const c=Vue.resolveComponent("a-typography-title"),f=Vue.resolveComponent("a-textarea"),s=Vue.resolveComponent("a-button"),V=Vue.resolveComponent("a-col"),B=Vue.resolveComponent("a-typography-link"),x=Vue.resolveComponent("a-popconfirm"),E=Vue.resolveComponent("a-input"),T=Vue.resolveComponent("a-table"),I=Vue.resolveComponent("a-row");return Vue.openBlock(),Vue.createElementBlock("div",R,[Vue.createVNode(I,{type:"flex",class:"start"},{default:Vue.withCtx(()=>[Vue.createVNode(V,{class:"left",flex:"auto"},{default:Vue.withCtx(()=>[Vue.createVNode(c,{level:2},{default:Vue.withCtx(()=>[Vue.createTextVNode("单词表解析工具")]),_:1}),Vue.createVNode(c,{level:4},{default:Vue.withCtx(()=>[Vue.createTextVNode("说明")]),_:1}),O,U,Vue.createVNode(f,{value:o.value,"onUpdate:value":d[0]||(d[0]=p=>o.value=p),placeholder:"请粘贴单词表","auto-size":{minRows:5,maxRows:5},style:{width:"100%"}},null,8,["value"]),Vue.createVNode(s,{type:"primary",onClick:t},{default:Vue.withCtx(()=>[Vue.createTextVNode("解析")]),_:1}),Vue.createVNode(s,{onClick:b},{default:Vue.withCtx(()=>[Vue.createTextVNode("添加单词")]),_:1}),Vue.createVNode(s,{type:"primary",onClick:n},{default:Vue.withCtx(()=>[Vue.createTextVNode("导出json")]),_:1}),Vue.createVNode(s,{onClick:g},{default:Vue.withCtx(()=>[Vue.createTextVNode("添加至临时数据")]),_:1}),$]),_:1}),Vue.createVNode(V,{class:"right",flex:"auto"},{default:Vue.withCtx(()=>[Vue.createVNode(T,{class:"table",columns:y,"data-source":a.value,bordered:"",pagination:!1,ref_key:"tableRef",ref:h},{bodyCell:Vue.withCtx(({column:p,text:S,index:r})=>[p.dataIndex==="operation"?(Vue.openBlock(),Vue.createElementBlock("div",F,[l[r]?(Vue.openBlock(),Vue.createElementBlock("span",z,[Vue.createVNode(B,{onClick:_=>w(r),style:{"margin-right":"2px"}},{default:Vue.withCtx(()=>[Vue.createTextVNode("保存")]),_:2},1032,["onClick"]),Vue.createVNode(x,{title:"放弃更改?",onConfirm:_=>N(r)},{default:Vue.withCtx(()=>[A]),_:2},1032,["onConfirm"])])):(Vue.openBlock(),Vue.createElementBlock("span",J,[Vue.createElementVNode("a",{onClick:_=>v(r),style:{"margin-right":"2px"}},"编辑",8,M),Vue.createVNode(x,{title:"确定删除?",onConfirm:_=>k(r)},{default:Vue.withCtx(()=>[W]),_:2},1032,["onConfirm"])]))])):p.dataIndex==="index"?(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:1},[Vue.createTextVNode(Vue.toDisplayString(r+1),1)],64)):(Vue.openBlock(),Vue.createElementBlock("div",q,[l[r]?(Vue.openBlock(),Vue.createBlock(E,{key:0,value:l[r][p.dataIndex],"onUpdate:value":_=>l[r][p.dataIndex]=_,style:{margin:"-5px 0"}},null,8,["value","onUpdate:value"])):(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:1},[Vue.createTextVNode(Vue.toDisplayString(S),1)],64))]))]),_:1},8,["data-source"])]),_:1})]),_:1})])}}});const G=D(Q,[["__scopeId","data-v-c179a47f"]]);export{G as default};
