import{f as T,a as L,g,b as R}from"./random-45c8d78f.js";import{g as P,a as z,c as E,b as M}from"./questions-2439da6f.js";import{g as x}from"./index-b70d4d65.js";import{g as S,_ as O}from"./index-46711d87.js";const q={class:"random"},D={class:"select"},U={class:"question"},H={class:"bottom"},I={class:"btn-area"},$={class:"ans-text"},j=Vue.defineComponent({__name:"RandomPage",setup(A){const s=S(),o=Vue.ref({q:""}),v=Vue.ref(!1),i=Vue.ref(["\\"]),p=Vue.ref(40),u=Vue.ref(!1),n=Vue.ref(!1),y=P();var l=[[]],c=0;let a=null;Vue.watch(i,()=>{l=z(i.value),a=null},{immediate:!0}),Vue.watch(i,()=>{s.history.data=l}),Vue.watch(u,()=>{c=0,n.value&&u.value&&(n.value=!1),u.value?s.oneQuesMode="order":!n.value&&!u.value&&(s.oneQuesMode="null")}),Vue.watch(n,()=>{a=null,n.value&&u.value&&(u.value=!1),n.value?s.oneQuesMode="noRepeat":!n.value&&!u.value&&(s.oneQuesMode="null")});const N=()=>{const t=g(l,c);if(!t){c=0;const e=g(l,c);if(!e){o.value="",antd.message.error("当前抽取范围不存在或没有题目！");return}o.value=e,antd.message.info("当前抽取范围的题目已经全部抽取完毕，已自动重置"),c++;return}o.value=t,c++},w=()=>{if(a===null&&(a=x(l)),a&&a.length===0&&(o.value="",antd.message.info("所有题目全部抽取完毕，自动重置"),a=x(l)),!a){o.value="",antd.message.error("当前抽取范围不存在或没有题目！");return}const t=R(a);o.value=t,a=a.filter(e=>e!==t)},k=()=>{if(!(!n.value||!a)){if(a.indexOf(o.value)>-1){antd.message.error("禁止重复添加！！！");return}a.push(o.value),antd.message.info("当前题目重新已添加到题目列表中")}},_=()=>{v.value=!0,setTimeout(()=>{if(v.value=!1,u.value){N();return}if(n.value){w();return}const t=L(l);t?o.value=t:(o.value="",antd.message.error("当前抽取范围不存在或没有题目！"))},300)},C=()=>{let t=s.history;if(!t.data)return;const{pathList:e,error:d,del:V}=E(t.data);d&&(V&&antd.message.warn(`不存在的路径 ${V.join(", ")} ，已自动从历史记录中删除`),t.data=e),t.data.length!=0&&(l=t.data,i.value=M(t.data),antd.message.info("已自动加载上次选择的抽题范围了"))},Q=()=>{if(s.oneQuesMode)switch(s.oneQuesMode){case"order":u.value=!0;break;case"noRepeat":n.value=!0;break}};return Vue.onMounted(()=>{Q(),C(),_()}),(t,e)=>{const d=Vue.resolveComponent("a-col"),V=Vue.resolveComponent("a-tree-select"),m=Vue.resolveComponent("a-row"),h=Vue.resolveComponent("a-switch"),f=Vue.resolveComponent("a-button"),b=Vue.resolveComponent("a-spin"),B=Vue.resolveComponent("a-popover");return Vue.openBlock(),Vue.createElementBlock("div",q,[Vue.createElementVNode("div",D,[Vue.createVNode(m,{type:"flex",align:"left"},{default:Vue.withCtx(()=>[Vue.createVNode(d,{style:{"margin-right":"8px"}},{default:Vue.withCtx(()=>[Vue.createTextVNode("抽题范围: ")]),_:1}),Vue.createVNode(d,{flex:"auto"},{default:Vue.withCtx(()=>[Vue.createVNode(V,{value:i.value,"onUpdate:value":e[0]||(e[0]=r=>i.value=r),"tree-data":Vue.unref(y),style:{width:"100%"},"tree-checkable":"","allow-clear":"","show-checked-strategy":Vue.unref(antd.TreeSelect).SHOW_PARENT,placeholder:"Please select","tree-node-filter-prop":"label","tree-line":!0},null,8,["value","tree-data","show-checked-strategy"])]),_:1})]),_:1}),Vue.createVNode(m,{type:"flex",align:"left"},{default:Vue.withCtx(()=>[Vue.createVNode(d,{style:{"margin-right":"8px"}},{default:Vue.withCtx(()=>[Vue.createVNode(h,{checked:n.value,"onUpdate:checked":e[1]||(e[1]=r=>n.value=r)},null,8,["checked"]),Vue.createTextVNode(" 防止重复 "),n.value?(Vue.openBlock(),Vue.createBlock(f,{key:0,onClick:k,size:"small"},{default:Vue.withCtx(()=>[Vue.createTextVNode("重加")]),_:1})):Vue.createCommentVNode("",!0)]),_:1}),Vue.createVNode(d,null,{default:Vue.withCtx(()=>[Vue.createVNode(h,{checked:u.value,"onUpdate:checked":e[2]||(e[2]=r=>u.value=r)},null,8,["checked"]),Vue.createTextVNode(" 顺序模式 ")]),_:1})]),_:1})]),Vue.createElementVNode("div",U,[Vue.createVNode(b,{class:"",size:"large",spinning:v.value},{default:Vue.withCtx(()=>[Vue.createElementVNode("h1",{style:Vue.normalizeStyle({"font-size":p.value+"px"})},Vue.toDisplayString(o.value.q),5)]),_:1},8,["spinning"])]),Vue.createElementVNode("div",H,[Vue.createVNode(T,{value:p.value,"onUpdate:value":e[3]||(e[3]=r=>p.value=r)},null,8,["value"]),Vue.createElementVNode("div",I,[o.value.ans?(Vue.openBlock(),Vue.createBlock(B,{key:0,title:"答案查看",trigger:"click",placement:"top"},{content:Vue.withCtx(()=>[Vue.createElementVNode("span",$,Vue.toDisplayString(o.value.ans),1)]),default:Vue.withCtx(()=>[Vue.createVNode(f,{class:"ans-btn",size:"small"},{default:Vue.withCtx(()=>[Vue.createTextVNode("答案")]),_:1})]),_:1})):(Vue.openBlock(),Vue.createBlock(f,{key:1,class:"ans-btn",size:"small",disabled:""},{default:Vue.withCtx(()=>[Vue.createTextVNode("答案")]),_:1})),Vue.createVNode(f,{class:"rand-btn",type:"primary",size:"large",onClick:e[4]||(e[4]=r=>_())},{default:Vue.withCtx(()=>[Vue.createTextVNode("再来一道")]),_:1})])])])}}});const K=O(j,[["__scopeId","data-v-9e426f55"]]);export{K as default};
